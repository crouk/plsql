prompt Borrado de tablas ****************************************************

drop table conductores_viajes cascade constraints;
drop table viajes cascade constraints;
drop table pedidos cascade constraints;
drop table tipos_mercancia cascade constraints;
drop table clientes cascade constraints;
drop table conductores cascade constraints;
drop table vehiculos cascade constraints;
drop table remolques cascade constraints;


prompt Creacion de tablas ****************************************************

PROMPT Creando Tabla 'CLIENTES'
CREATE TABLE CLIENTES
 (COD_CLIENTE NUMBER(4) NOT NULL
 ,NOMBRE VARCHAR2(20)
 ,DIRECCION VARCHAR2(20)
 ,POBLACION VARCHAR2(20)
 ,TELEFONO NUMBER(15)
 ,CIF VARCHAR2(10)
 )
/

PROMPT Creando Tabla 'REMOLQUES'
CREATE TABLE REMOLQUES
 (MATRICULA VARCHAR2(10) NOT NULL
 ,LONGITUD NUMBER(4,2)
 ,PESO_MAX NUMBER(7)
 ,VOLUMEN NUMBER(4,2)
 )
/

PROMPT Creando Tabla 'PEDIDOS'
CREATE TABLE PEDIDOS
 (NUM_PEDIDO NUMBER(4) NOT NULL
 ,FECHA_PEDIDO DATE
 ,FECHA_ENTREGA DATE
 ,ORIGEN VARCHAR2(20)
 ,DESTINO VARCHAR2(20)
 ,PESO NUMBER(7)
 ,NUM_PALES NUMBER(3)
 ,COD_CLIENTE NUMBER(4) NOT NULL
 ,COD_TIPO NUMBER(4) NOT NULL
 )
/

PROMPT Creando Tabla 'CONDUCTORES_VIAJES'
CREATE TABLE CONDUCTORES_VIAJES
 (COD_CONDUCTOR NUMBER(4) NOT NULL
 ,NUM_VIAJE NUMBER(4) NOT NULL
 )
/

PROMPT Creando Tabla 'CONDUCTORES'
CREATE TABLE CONDUCTORES
 (COD_CONDUCTOR NUMBER(4) NOT NULL
 ,DNI VARCHAR2(10)
 ,NOMBRE VARCHAR2(20)
 ,APELLIDOS VARCHAR2(20)
 ,FECHA_NAC DATE
 )
/

PROMPT Creando Tabla 'VEHICULOS'
CREATE TABLE VEHICULOS
 (MATRICULA VARCHAR2(10) NOT NULL
 ,MARCA VARCHAR2(20)
 ,TIPO VARCHAR2(20)
 ,TARA NUMBER(6)
 ,PMA NUMBER(6)
 ,FECHA_MATRIC DATE
 ,ULTIMA_REVISION DATE
 ,KILOMETROS NUMBER(8)
 )
/

PROMPT Creando Tabla 'VIAJES'
CREATE TABLE VIAJES
 (NUM_VIAJE NUMBER(4) NOT NULL
 ,FECHA_SALIDA DATE
 ,FECHA_LLEGADA DATE
 ,PESO NUMBER(7)
 ,NUM_PEDIDO NUMBER(4) NOT NULL
 ,VEHICULO VARCHAR2(10) NOT NULL
 ,REMOLQUE VARCHAR2(10)
 )
/

PROMPT Creando Tabla 'TIPOS_MERCANCIA'
CREATE TABLE TIPOS_MERCANCIA
 (COD_TIPO NUMBER(4) NOT NULL
 ,DESCRIPCION VARCHAR2(20)
 ,PELIGROSIDAD VARCHAR2(240)
 ,FRAGILIDAD VARCHAR2(240)
 ,REQUIERE_FRIO VARCHAR2(240)
 )
/



prompt Adición de Constraints ****************************************************

  
PROMPT Creating Primary Key on 'CLIENTES'
ALTER TABLE CLIENTES
 ADD (CONSTRAINT CLI_PK PRIMARY KEY 
  (COD_CLIENTE))
/

PROMPT Creating Primary Key on 'REMOLQUES'
ALTER TABLE REMOLQUES
 ADD (CONSTRAINT REM_PK PRIMARY KEY 
  (MATRICULA))
/

PROMPT Creating Primary Key on 'PEDIDOS'
ALTER TABLE PEDIDOS
 ADD (CONSTRAINT PED_PK PRIMARY KEY 
  (NUM_PEDIDO))
/

PROMPT Creating Primary Key on 'CONDUCTORES_VIAJES'
ALTER TABLE CONDUCTORES_VIAJES
 ADD (CONSTRAINT CON_VIA_PK PRIMARY KEY 
  (COD_CONDUCTOR
  ,NUM_VIAJE))
/

PROMPT Creating Primary Key on 'CONDUCTORES'
ALTER TABLE CONDUCTORES
 ADD (CONSTRAINT CON_PK PRIMARY KEY 
  (COD_CONDUCTOR))
/

PROMPT Creating Primary Key on 'VEHICULOS'
ALTER TABLE VEHICULOS
 ADD (CONSTRAINT VE_PK PRIMARY KEY 
  (MATRICULA))
/

PROMPT Creating Primary Key on 'VIAJES'
ALTER TABLE VIAJES
 ADD (CONSTRAINT VIA_PK PRIMARY KEY 
  (NUM_VIAJE))
/

PROMPT Creating Primary Key on 'TIPOS_MERCANCIA'
ALTER TABLE TIPOS_MERCANCIA
 ADD (CONSTRAINT TM_PK PRIMARY KEY 
  (COD_TIPO))
/
        
PROMPT Creating Check Constraints on 'TIPOS_MERCANCIA'
ALTER TABLE TIPOS_MERCANCIA
 ADD (CONSTRAINT TIP_MERC_PELI CHECK (PELIGROSIDAD IN ('MEDIA', 'BAJA', 'ALTA')))
 ADD (CONSTRAINT TIP_MERC_FRAGI CHECK (FRAGILIDAD IN ('MEDIA', 'BAJA', 'ALTA')))
 ADD (CONSTRAINT TIP_MERC_FRIO CHECK (REQUIERE_FRIO IN ('SI', 'NO')))
/

PROMPT Creating Foreign Keys on 'PEDIDOS'
ALTER TABLE PEDIDOS ADD CONSTRAINT
 PED_CLI_FK FOREIGN KEY 
  (COD_CLIENTE) REFERENCES CLIENTES
  (COD_CLIENTE) ADD CONSTRAINT
 PED_TM_FK FOREIGN KEY 
  (COD_TIPO) REFERENCES TIPOS_MERCANCIA
  (COD_TIPO)
/

PROMPT Creating Foreign Keys on 'CONDUCTORES_VIAJES'
ALTER TABLE CONDUCTORES_VIAJES ADD CONSTRAINT
 CON_VIA_CON_FK FOREIGN KEY 
  (COD_CONDUCTOR) REFERENCES CONDUCTORES
  (COD_CONDUCTOR) ADD CONSTRAINT
 CON_VIA_VIA_FK FOREIGN KEY 
  (NUM_VIAJE) REFERENCES VIAJES
  (NUM_VIAJE)
/

PROMPT Creating Foreign Keys on 'VIAJES'
ALTER TABLE VIAJES ADD CONSTRAINT
 VIA_PED_FK FOREIGN KEY 
  (NUM_PEDIDO) REFERENCES PEDIDOS
  (NUM_PEDIDO) ADD CONSTRAINT
 VIA_VE_FK FOREIGN KEY 
  (VEHICULO) REFERENCES VEHICULOS
  (MATRICULA) ADD CONSTRAINT
 VIA_REM_FK FOREIGN KEY 
  (REMOLQUE) REFERENCES REMOLQUES
  (MATRICULA)
/

prompt Inserción de datos ****************************************************

prompt Inserción de datos en la tabla CLIENTES
INSERT INTO CLIENTES ( COD_CLIENTE, NOMBRE, DIRECCION, POBLACION, TELEFONO,
CIF ) VALUES ( 
201, 'ULMA', 'B. Otadui, 8', 'OÑATI', 9434583409, '6305683049'); 
INSERT INTO CLIENTES ( COD_CLIENTE, NOMBRE, DIRECCION, POBLACION, TELEFONO,
CIF ) VALUES ( 
202, 'ACERALIA', 'Avda. Torre, S/N', 'ASTURIAS', 9218483214, '7434734543'); 
INSERT INTO CLIENTES ( COD_CLIENTE, NOMBRE, DIRECCION, POBLACION, TELEFONO,
CIF ) VALUES ( 
203, 'TORNILLERIA OKA', 'Bizkaia Kalea, 42', 'ERMUA', 9430924385, '3457245715'); 
INSERT INTO CLIENTES ( COD_CLIENTE, NOMBRE, DIRECCION, POBLACION, TELEFONO,
CIF ) VALUES ( 
204, 'UCEM', 'Epele, 3', 'ARRASATE', 9430359823, '4734645672'); 


prompt Inserción de datos en la tabla CONDUCTORES
INSERT INTO CONDUCTORES ( COD_CONDUCTOR, DNI, NOMBRE, APELLIDOS,
FECHA_NAC ) VALUES ( 
1, '6656324563', 'Jon', 'Arregi Lopez',  TO_Date( '03/02/1965 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')); 
INSERT INTO CONDUCTORES ( COD_CONDUCTOR, DNI, NOMBRE, APELLIDOS,
FECHA_NAC ) VALUES ( 
2, '3456231375', 'Angel', 'Garcia Pascual',  TO_Date( '04/03/1969 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')); 
INSERT INTO CONDUCTORES ( COD_CONDUCTOR, DNI, NOMBRE, APELLIDOS,
FECHA_NAC ) VALUES ( 
3, '5645672457', 'Iñigo', 'Sakolegi Ansuaga',  TO_Date( '03/08/1971 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')); 
INSERT INTO CONDUCTORES ( COD_CONDUCTOR, DNI, NOMBRE, APELLIDOS,
FECHA_NAC ) VALUES ( 
4, '2457245724', 'Ana', 'Perez Alzola',  TO_Date( '12/07/1975 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')); 


prompt Inserción de datos en la tabla REMOLQUES
INSERT INTO REMOLQUES ( MATRICULA, LONGITUD, PESO_MAX, VOLUMEN ) VALUES ( 
'43847R', 17, 30000, 45); 
INSERT INTO REMOLQUES ( MATRICULA, LONGITUD, PESO_MAX, VOLUMEN ) VALUES ( 
'49375R', 15, 27000, 33); 
INSERT INTO REMOLQUES ( MATRICULA, LONGITUD, PESO_MAX, VOLUMEN ) VALUES ( 
'09934R', 15, 28000, 32); 
INSERT INTO REMOLQUES ( MATRICULA, LONGITUD, PESO_MAX, VOLUMEN ) VALUES ( 
'12428R', 10, 22000, 24); 


prompt Inserción de datos en la tabla TIPOS_MERCANCIA
INSERT INTO TIPOS_MERCANCIA ( COD_TIPO, DESCRIPCION, PELIGROSIDAD, FRAGILIDAD,
REQUIERE_FRIO ) VALUES ( 
0, 'Normal', 'BAJA', 'BAJA', 'NO'); 
INSERT INTO TIPOS_MERCANCIA ( COD_TIPO, DESCRIPCION, PELIGROSIDAD, FRAGILIDAD,
REQUIERE_FRIO ) VALUES ( 
1, 'Tamaño Atípico', 'MEDIA', 'MEDIA', 'NO'); 
INSERT INTO TIPOS_MERCANCIA ( COD_TIPO, DESCRIPCION, PELIGROSIDAD, FRAGILIDAD,
REQUIERE_FRIO ) VALUES ( 
2, 'Alimento Perecedero', 'BAJA', 'MEDIA', 'SI'); 
INSERT INTO TIPOS_MERCANCIA ( COD_TIPO, DESCRIPCION, PELIGROSIDAD, FRAGILIDAD,
REQUIERE_FRIO ) VALUES ( 
3, 'Vidrio', 'BAJA', 'ALTA', 'NO'); 
INSERT INTO TIPOS_MERCANCIA ( COD_TIPO, DESCRIPCION, PELIGROSIDAD, FRAGILIDAD,
REQUIERE_FRIO ) VALUES ( 
4, 'Material Inflamable', 'ALTA', 'BAJA', 'NO'); 


prompt Inserción de datos en la tabla VEHICULOS 
INSERT INTO VEHICULOS ( MATRICULA, MARCA, TIPO, TARA, PMA, FECHA_MATRIC, ULTIMA_REVISION,
KILOMETROS ) VALUES ( 
'0873FMB', 'MERCEDES Vito', 'MONOVOLUMEN', 2100, 4000,  TO_Date( '03/01/1997 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
,  TO_Date( '07/06/2000 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'), 734871); 
INSERT INTO VEHICULOS ( MATRICULA, MARCA, TIPO, TARA, PMA, FECHA_MATRIC, ULTIMA_REVISION,
KILOMETROS ) VALUES ( 
'4235FMX', 'VOLVO 123', 'CAMION', 4700, 32000,  TO_Date( '07/05/2001 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
,  TO_Date( '03/07/1999 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'), 448927); 
INSERT INTO VEHICULOS ( MATRICULA, MARCA, TIPO, TARA, PMA, FECHA_MATRIC, ULTIMA_REVISION,
KILOMETROS ) VALUES ( 
'4982DMP', 'SCANIA 4590', 'CAMION', 4600, 30000,  TO_Date( '03/23/2002 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
,  TO_Date( '08/08/2002 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'), 29244); 
INSERT INTO VEHICULOS ( MATRICULA, MARCA, TIPO, TARA, PMA, FECHA_MATRIC, ULTIMA_REVISION,
KILOMETROS ) VALUES ( 
'9430DBF', 'RENAUL Express', 'MONOVOLUMEN', 1500, 3700,  TO_Date( '08/04/1995 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
,  TO_Date( '09/06/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'), 423432); 


prompt Inserción de datos en la tabla PEDIDOS 
INSERT INTO PEDIDOS ( NUM_PEDIDO, FECHA_PEDIDO, FECHA_ENTREGA, ORIGEN, DESTINO, PESO, NUM_PALES,
COD_CLIENTE, COD_TIPO ) VALUES ( 
150,  TO_Date( '03/23/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '07/01/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 'SANTANDER', 'BILBAO', 123000, NULL, 202, 1); 
INSERT INTO PEDIDOS ( NUM_PEDIDO, FECHA_PEDIDO, FECHA_ENTREGA, ORIGEN, DESTINO, PESO, NUM_PALES,
COD_CLIENTE, COD_TIPO ) VALUES ( 
151,  TO_Date( '04/18/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '04/27/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 'OÑATI', 'CUENCA', 30000, NULL, 201, 1); 
INSERT INTO PEDIDOS ( NUM_PEDIDO, FECHA_PEDIDO, FECHA_ENTREGA, ORIGEN, DESTINO, PESO, NUM_PALES,
COD_CLIENTE, COD_TIPO ) VALUES ( 
152,  TO_Date( '04/12/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '07/13/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 'ARRASATE', 'BILBAO', 400000, NULL, 204, 0); 
INSERT INTO PEDIDOS ( NUM_PEDIDO, FECHA_PEDIDO, FECHA_ENTREGA, ORIGEN, DESTINO, PESO, NUM_PALES,
COD_CLIENTE, COD_TIPO ) VALUES ( 
153,  TO_Date( '02/28/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '04/29/2005 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 'ERMUA', 'CADIZ', 783240, 993, 203, 0); 


prompt Inserción de datos en la tabla VIAJES 
INSERT INTO VIAJES ( NUM_VIAJE, FECHA_SALIDA, FECHA_LLEGADA, PESO, NUM_PEDIDO, VEHICULO,
REMOLQUE ) VALUES ( 
1001,  TO_Date( '04/20/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '04/23/2004 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 30000, 151, '4235FMX', '43847R'); 
INSERT INTO VIAJES ( NUM_VIAJE, FECHA_SALIDA, FECHA_LLEGADA, PESO, NUM_PEDIDO, VEHICULO,
REMOLQUE ) VALUES ( 
1002,  TO_Date( '07/14/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '08/15/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 10000, 152, '9430DBF', NULL); 
INSERT INTO VIAJES ( NUM_VIAJE, FECHA_SALIDA, FECHA_LLEGADA, PESO, NUM_PEDIDO, VEHICULO,
REMOLQUE ) VALUES ( 
1003,  TO_Date( '08/14/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '09/15/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 10000, 152, '9430DBF', NULL); 
INSERT INTO VIAJES ( NUM_VIAJE, FECHA_SALIDA, FECHA_LLEGADA, PESO, NUM_PEDIDO, VEHICULO,
REMOLQUE ) VALUES ( 
1004,  TO_Date( '10/14/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '10/15/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 10000, 152, '9430DBF', NULL); 
INSERT INTO VIAJES ( NUM_VIAJE, FECHA_SALIDA, FECHA_LLEGADA, PESO, NUM_PEDIDO, VEHICULO,
REMOLQUE ) VALUES ( 
1005,  TO_Date( '11/14/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '11/15/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 9000, 152, '9430DBF', NULL); 
INSERT INTO VIAJES ( NUM_VIAJE, FECHA_SALIDA, FECHA_LLEGADA, PESO, NUM_PEDIDO, VEHICULO,
REMOLQUE ) VALUES ( 
1006,  TO_Date( '12/14/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM'),  TO_Date( '12/15/2003 12:00:00 AM', 'MM/DD/YYYY HH:MI:SS AM')
, 11000, 152, '9430DBF', NULL); 

COMMIT;

